{
  "Name": "获得三级编码将要添加编码号",
  "Enabled": true,
  "Triggers": [
    {
      "$type": "Forguncy.SaveLoad.PostRequestTriggerSaveData, ServerDesignerCommon",
      "Permission": {
        "PermissionData": {
          "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionData, Forguncy.RbacPermission.Core",
          "permissionResource": {
            "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionResource, Forguncy.RbacPermission.Core"
          },
          "permissionBindings": [
            {
              "$type": "Forguncy.RbacPermission.Core.Impl.ServerCommand.ServerCommandPermissionBinding, Forguncy.RbacPermission.Core",
              "roleNames": [
                "FGC_LoginUser"
              ]
            }
          ]
        }
      },
      "Parameters": [
        {
          "Name": "二级编码ID",
          "DataValidationInfo": {}
        }
      ]
    }
  ],
  "Commands": [
    {
      "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
      "ParameterName": "行数",
      "TableValue": {
        "TableName": "材料(三级编码)",
        "TableValueType": 3,
        "SqlCondition": {
          "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
          "ColumnBindingInfo": {
            "TableName": "材料(三级编码)",
            "ColumnName": "二级编码_ID",
            "GUID": "069fcaba-946d-438d-908e-e2374099b4d2",
            "RelationBinding": {
              "RelatedTable": "二级编码",
              "RelatedColumn": "ID",
              "DisplayColumn": "ID"
            }
          },
          "Value": {
            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
            "SerializeProperty": "=二级编码ID"
          }
        }
      },
      "ID": "cfc56c7ea7e0468d9dbfe7f9b14f5f93"
    },
    {
      "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
      "ConditionAndCommandPairList": [
        {
          "Condition": {
            "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
            "param": {
              "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
              "ParamObject": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=行数"
              }
            },
            "value": "0",
            "compareType": 2
          },
          "CommandList": [
            {
              "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
              "ParameterName": "最大编码号",
              "TableValue": {
                "TableName": "材料(三级编码)",
                "OnlyGetValue": true,
                "TableValueType": 0,
                "BindingInfos": [
                  {
                    "GUID": "84032927-9bbf-424d-a0cd-bedb50ca247e",
                    "BindingInfo": {
                      "TableName": "材料(三级编码)",
                      "ColumnName": "最大编码号",
                      "GUID": "69639b9b-9f73-404b-becb-5d47042fd086"
                    },
                    "ColumnName": "最大编码号"
                  }
                ],
                "SqlCondition": {
                  "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
                  "ColumnBindingInfo": {
                    "TableName": "材料(三级编码)",
                    "ColumnName": "二级编码_ID",
                    "GUID": "36bbec5f-c0f4-4722-b3b9-fa7d6e8fcc23",
                    "RelationBinding": {
                      "RelatedTable": "二级编码",
                      "RelatedColumn": "ID",
                      "DisplayColumn": "ID"
                    }
                  },
                  "Value": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=二级编码ID"
                  }
                }
              },
              "ID": "4146daffad444a7ea2363c2c789f5176"
            },
            {
              "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
              "ErrorCode": "0",
              "Message": {
                "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                "SerializeProperty": "=最大编码号+1&\"\""
              }
            }
          ],
          "ID": "7a934558-065f-42a2-a880-96650667a811"
        },
        {
          "CommandList": [
            {
              "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
              "ErrorCode": "0",
              "Message": "1"
            }
          ],
          "ID": "5a6d280b-82f9-40eb-be3e-c2fddb4af9be"
        }
      ]
    }
  ]
}