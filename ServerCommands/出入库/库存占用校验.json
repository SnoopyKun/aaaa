{
  "$type": "Forguncy.SaveLoad.ServerCommandSaveData, ServerDesignerCommon",
  "Name": "库存占用校验",
  "Enabled": true,
  "Triggers": {
    "$type": "System.Collections.Generic.List`1[[Forguncy.SaveLoad.TriggerSaveDataBase, ServerDesignerCommon]], System.Private.CoreLib",
    "$values": [
      {
        "$type": "Forguncy.SaveLoad.InvokeTriggerSaveData, ServerDesignerCommon",
        "Parameters": {
          "$type": "System.Collections.Generic.List`1[[Forguncy.SaveLoad.PostRequestParameterSaveData, ServerDesignerCommon]], System.Private.CoreLib",
          "$values": [
            {
              "$type": "Forguncy.SaveLoad.PostRequestParameterSaveData, ServerDesignerCommon",
              "Name": "占用数",
              "DataValidationInfo": {
                "$type": "Forguncy.SaveLoad.DataValidationInfoSaveData, ServerDesignerCommon"
              }
            },
            {
              "$type": "Forguncy.SaveLoad.PostRequestParameterSaveData, ServerDesignerCommon",
              "Name": "物品ID",
              "DataValidationInfo": {
                "$type": "Forguncy.SaveLoad.DataValidationInfoSaveData, ServerDesignerCommon"
              }
            }
          ]
        }
      }
    ]
  },
  "Commands": {
    "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
    "$values": [
      {
        "$type": "Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon",
        "ParameterName": "被校验物品",
        "TableValue": {
          "$type": "Forguncy.Model.Commands.ParameterTableValue, ServerDesignerCommon",
          "TableName": "物品表",
          "TableValueType": 1,
          "BindingInfos": {
            "$type": "System.Collections.Generic.List`1[[Forguncy.Model.Commands.ParameterTableValueColumn, ServerDesignerCommon]], System.Private.CoreLib",
            "$values": [
              {
                "$type": "Forguncy.Model.Commands.ParameterTableValueColumn, ServerDesignerCommon",
                "GUID": "dab4f391-c26b-4abd-9201-8dcd3f564cef",
                "BindingInfo": {
                  "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                  "TableName": "物品表",
                  "ColumnName": "可用库存",
                  "GUID": "65f033b7-cf14-4c8e-b2a3-e5694600c14b"
                },
                "ColumnName": "可用库存"
              },
              {
                "$type": "Forguncy.Model.Commands.ParameterTableValueColumn, ServerDesignerCommon",
                "GUID": "3e8c1946-9696-4d3c-aba9-81df795818f5",
                "BindingInfo": {
                  "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
                  "TableName": "物品表",
                  "ColumnName": "名称",
                  "GUID": "6f193059-49dd-46fa-a0de-b1b638b1da0b"
                },
                "ColumnName": "名称"
              }
            ]
          },
          "SqlCondition": {
            "$type": "ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess",
            "ColumnBindingInfo": {
              "$type": "ForguncyDataAccess.BindingInfo, ForguncyDataAccess",
              "TableName": "物品表",
              "ColumnName": "ID",
              "GUID": "c71942ce-d7ac-44c1-bc3f-a7bb37ed51fb"
            },
            "Value": {
              "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
              "SerializeProperty": "=物品ID"
            }
          }
        },
        "ID": "52f8ab63ec594565a83f1fdb38e5da79"
      },
      {
        "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
        "ConditionAndCommandPairList": {
          "$type": "System.Collections.Generic.List`1[[Forguncy.Model.ConditionAndCommandPair, ServerDesignerCommon]], System.Private.CoreLib",
          "$values": [
            {
              "$type": "Forguncy.Model.ConditionAndCommandPair, ServerDesignerCommon",
              "Condition": {
                "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                "param": {
                  "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                  "ParamObject": {
                    "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                    "SerializeProperty": "=被校验物品.可用库存"
                  }
                },
                "value": {
                  "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                  "SerializeProperty": "=占用数"
                },
                "compareType": 4
              },
              "CommandList": {
                "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
                "$values": [
                  {
                    "$type": "Forguncy.Model.ReturnCommand, ServerDesignerCommon",
                    "ErrorCode": "1",
                    "Message": {
                      "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                      "SerializeProperty": "=被校验物品.名称&\"可用库存不足，无法锁定\""
                    }
                  }
                ]
              },
              "Comments": "出库时需要判断可用库存的数量，保证锁定成功",
              "ID": "d580eb79-8251-4b35-b9bd-cd2e6cf8bb92"
            }
          ]
        }
      }
    ]
  }
}