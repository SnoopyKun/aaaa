{
  "$type": "Forguncy.SaveLoad.ServerCommandSaveData, ServerDesignerCommon",
  "Name": "更新流转单状态",
  "Description": "根据出入库单修改 采购单与销售单的出入库状态",
  "Enabled": true,
  "Triggers": {
    "$type": "System.Collections.Generic.List`1[[Forguncy.SaveLoad.TriggerSaveDataBase, ServerDesignerCommon]], System.Private.CoreLib",
    "$values": [
      {
        "$type": "Forguncy.SaveLoad.InvokeTriggerSaveData, ServerDesignerCommon",
        "Parameters": {
          "$type": "System.Collections.Generic.List`1[[Forguncy.SaveLoad.PostRequestParameterSaveData, ServerDesignerCommon]], System.Private.CoreLib",
          "$values": [
            {
              "$type": "Forguncy.SaveLoad.PostRequestParameterSaveData, ServerDesignerCommon",
              "Name": "业务单号",
              "DataValidationInfo": {
                "$type": "Forguncy.SaveLoad.DataValidationInfoSaveData, ServerDesignerCommon"
              }
            },
            {
              "$type": "Forguncy.SaveLoad.PostRequestParameterSaveData, ServerDesignerCommon",
              "Name": "出入库类型",
              "DataValidationInfo": {
                "$type": "Forguncy.SaveLoad.DataValidationInfoSaveData, ServerDesignerCommon"
              }
            }
          ]
        }
      }
    ]
  },
  "Commands": {
    "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
    "$values": [
      {
        "$type": "Forguncy.Model.ConditionCommand, ServerDesignerCommon",
        "ConditionAndCommandPairList": {
          "$type": "System.Collections.Generic.List`1[[Forguncy.Model.ConditionAndCommandPair, ServerDesignerCommon]], System.Private.CoreLib",
          "$values": [
            {
              "$type": "Forguncy.Model.ConditionAndCommandPair, ServerDesignerCommon",
              "Condition": {
                "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                "SubConditions": {
                  "$type": "System.Collections.Generic.List`1[[ForguncyDataAccess.ISqlCondition, ForguncyDataAccess]], System.Private.CoreLib",
                  "$values": [
                    {
                      "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                      "param": {
                        "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                        "ParamObject": {
                          "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                          "SerializeProperty": "=LEFT(业务单号,2)"
                        }
                      },
                      "value": "CG"
                    },
                    {
                      "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                      "param": {
                        "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                        "ParamObject": {
                          "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                          "SerializeProperty": "=出入库类型"
                        }
                      },
                      "value": "1"
                    }
                  ]
                }
              },
              "CommandList": {
                "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
                "$values": [
                  {
                    "$type": "Forguncy.Model.RequestServerCommand, ServerDesignerCommon",
                    "ServerCommandName": "更新采购单入库状态",
                    "Parameters": {
                      "$type": "System.Collections.Generic.List`1[[Forguncy.Model.RequestServerCommandParamBase, ServerDesignerCommon]], System.Private.CoreLib",
                      "$values": [
                        {
                          "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                          "ParamName": "采购单号",
                          "Value": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=业务单号"
                          }
                        }
                      ]
                    },
                    "RefreshAfterFinish": true,
                    "CheckDataValidation": true
                  }
                ]
              },
              "Comments": "1 代表采购入库",
              "ID": "f90d6e7b-e6c4-4861-89b3-f8bc4485181e"
            },
            {
              "$type": "Forguncy.Model.ConditionAndCommandPair, ServerDesignerCommon",
              "Condition": {
                "$type": "ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess",
                "SubConditions": {
                  "$type": "System.Collections.Generic.List`1[[ForguncyDataAccess.ISqlCondition, ForguncyDataAccess]], System.Private.CoreLib",
                  "$values": [
                    {
                      "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                      "param": {
                        "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                        "ParamObject": {
                          "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                          "SerializeProperty": "=LEFT(业务单号,2)"
                        }
                      },
                      "value": "XS"
                    },
                    {
                      "$type": "Forguncy.Model.IfCondition, ServerDesignerCommon",
                      "param": {
                        "$type": "Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon",
                        "ParamObject": {
                          "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                          "SerializeProperty": "=出入库类型"
                        }
                      },
                      "value": "4"
                    }
                  ]
                }
              },
              "CommandList": {
                "$type": "System.Collections.Generic.List`1[[GrapeCity.Forguncy.Commands.Command, Forguncy.Commands]], System.Private.CoreLib",
                "$values": [
                  {
                    "$type": "Forguncy.Model.RequestServerCommand, ServerDesignerCommon",
                    "ServerCommandName": "更新销售单出库状态",
                    "Parameters": {
                      "$type": "System.Collections.Generic.List`1[[Forguncy.Model.RequestServerCommandParamBase, ServerDesignerCommon]], System.Private.CoreLib",
                      "$values": [
                        {
                          "$type": "Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon",
                          "ParamName": "销售单号",
                          "Value": {
                            "$type": "Forguncy.Model.FormulaReferObject, ServerDesignerCommon",
                            "SerializeProperty": "=业务单号"
                          }
                        }
                      ]
                    },
                    "RefreshAfterFinish": true,
                    "CheckDataValidation": true
                  }
                ]
              },
              "Comments": "4 代表销售出库",
              "ID": "8feeda14-66f1-4f5f-b192-f8d5cb544647"
            }
          ]
        }
      }
    ]
  }
}